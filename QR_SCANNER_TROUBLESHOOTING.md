# QR Scanner Troubleshooting Guide

## Common Issues and Solutions

### Issue 1: "QR Scanner library not loaded"
**Solution:**
- Refresh the page (F5)
- Check your internet connection (library loads from CDN)
- Open browser console (F12) and check for errors
- Try a different browser

### Issue 2: "Camera permission denied"
**Solution:**
1. **Chrome/Edge:**
   - Click the lock icon in the address bar
   - Set "Camera" to "Allow"
   - Refresh the page

2. **Firefox:**
   - Click the shield icon in address bar
   - Click "Permissions" → Allow camera
   - Refresh the page

3. **Safari:**
   - Safari → Preferences → Websites → Camera
   - Allow camera access for this site

### Issue 3: "No camera found"
**Solution:**
- **On PC:** Use the "Enter QR Code Manually" option
- **On Mobile:** Check if camera is being used by another app
- Close other apps that might be using the camera
- Restart your device

### Issue 4: Scanner starts but doesn't detect QR codes
**Possible causes:**
1. **QR code is too small or far away**
   - Move closer to the QR code
   - Make sure QR code is well-lit
   - Hold steady for 2-3 seconds

2. **QR code is damaged or unclear**
   - Try a different QR code
   - Increase screen brightness
   - Clean your camera lens

3. **Wrong QR code format**
   - Make sure you're scanning a QR code generated by the teacher
   - QR code must be in JSON format

### Issue 5: Works on mobile but not PC
**Solution:**
- PC webcams may have different permissions
- Use "Enter QR Code Manually" option instead
- Check if webcam is working in other apps (like Zoom, Teams)

## Testing the Scanner

### Test 1: Check if library is loaded
Open browser console (F12) and type:
```javascript
typeof Html5Qrcode
```
Should return: `"function"`

### Test 2: Check available cameras
Open browser console (F12) and type:
```javascript
Html5Qrcode.getCameras().then(devices => console.log('Cameras:', devices))
```
Should list available cameras

### Test 3: Check permissions
Open browser console (F12) and type:
```javascript
navigator.mediaDevices.getUserMedia({video: true}).then(stream => {
    console.log('Camera access granted');
    stream.getTracks().forEach(track => track.stop());
}).catch(err => console.error('Camera access denied:', err))
```

## Manual Entry (Recommended for PC)

If camera doesn't work, use manual entry:

1. Teacher generates QR code
2. Teacher copies the QR code data (JSON)
3. Student pastes it into the "Enter QR Code Manually" text area
4. Click "Submit QR Code"

### QR Code Format Example:
```json
{
  "token": "abc123xyz",
  "class": "Class 01",
  "subject": "IT8007",
  "period": "Period 1",
  "teacherId": 2,
  "teacherUsername": "teacher1",
  "expiresAt": "2024-12-20T10:30:00.000Z"
}
```

## Browser Compatibility

### ✅ Fully Supported:
- Chrome (Desktop & Mobile)
- Edge (Desktop & Mobile)
- Firefox (Desktop & Mobile)
- Safari (iOS 11+)

### ⚠️ Limited Support:
- Safari (Desktop) - May require additional permissions
- Older browsers - May not support camera API

## Still Not Working?

1. **Open Browser Console (F12)**
   - Look for red error messages
   - Copy the error and report it

2. **Check Browser Settings**
   - Ensure camera permissions are allowed
   - Try in incognito/private mode
   - Disable browser extensions temporarily

3. **Try Different Browser**
   - Chrome usually works best
   - Firefox is also reliable

4. **Use Manual Entry**
   - This always works as a fallback
   - No camera needed

## Quick Fix Checklist

- [ ] Refreshed the page
- [ ] Allowed camera permissions
- [ ] Checked browser console for errors
- [ ] Tried manual entry option
- [ ] Tested in different browser
- [ ] Restarted browser/device
- [ ] Checked if camera works in other apps

